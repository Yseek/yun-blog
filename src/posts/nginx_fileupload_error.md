---
title: '413 Request Entity Too Large 에러, 1분 만에 해결하기'
date: '2025-07-03 10:43'
summary: '파일 업로드 기능을 개발하고 테스트하던 중 마주쳤던 간단하지만 당황스러운 에러와 해결법이다.'
tags: ['Nginx', '웹 서버', '트러블슈팅']
---

파일 업로드 기능을 개발하고 테스트하던 중 마주쳤던 간단하지만 당황스러운 에러와 해결법이다.

## 문제 상황

파일 업로드 API를 만들어 테스트하는데 이상한 점을 발견했다. 1MB 미만의 이미지나 텍스트 파일은 잘 올라가는데, 1MB가 넘어가는 파일만 올리려고 하면 **`413 Request Entity Too Large`** 에러가 발생했다.

처음에는 애플리케이션(Spring)의 설정 문제인 줄 알고 한참을 들여다봤지만, 문제는 다른 곳에 있었다.

## Nginx의 기본 설정

원인은 바로 앞단에서 요청을 받아주는 **Nginx**였다.

Nginx는 웹 서버로 요청이 들어올 때 그 크기를 제한하는 `client_max_body_size`라는 설정값이 있다. 이 값의 **기본값(default)이 `1m` (1메가바이트)** 이기 때문에, 이보다 큰 요청(파일 포함)이 들어오면 Nginx가 사전에 차단해버렸다.

즉, 요청이 제 서버 애플리케이션(WAS)에 도달하기도 전에 Nginx가 "너무 커!"라며 돌려보내고 있었다.

## 해결 방법: 설정 파일에 한 줄 추가

해결법은 매우 간단하다. Nginx 설정 파일에 `client_max_body_size` 값을 원하는 크기로 늘려주면 된다.

1.  Nginx 설정 파일을 엽니다. (보통 `/etc/nginx/nginx.conf`)

2.  `http` 블록 안에 다음과 같이 원하는 용량을 추가하거나 수정합니다.

    ```nginx
    http {
        # ... 다른 설정들 ...

        # 업로드 용량을 100MB로 늘리기
        client_max_body_size 100M;

        # ... 다른 설정들 ...
    }
    ```

    > **💡 Tip:** 이 설정은 `http`, `server`, `location` 블록 어디에나 넣을 수 있다. `http`에 넣으면 전역 설정이 되고, 특정 `server`나 `location`에만 적용할 수도 있다. 용량 단위는 `K`(킬로바이트), `M`(메가바이트), `G`(기가바이트) 등을 사용할 수 있습니다. `0`으로 설정하면 용량 제한을 두지 않는다.

3.  설정을 저장하고 Nginx를 재시작하거나 설정을 리로드(reload)한다.

    ```bash
    # 설정 문법에 오류가 없는지 체크
    nginx -t

    # Nginx에 설정 리로드
    systemctl restart nginx
    ```

이제 다시 파일을 업로드해 보면 언제 그랬냐는 듯이 성공적으로 올라가는 것을 볼 수 있다.

![성공](../images/nginx_fileupload_error/nginx_fileupload_2.png)

## 마무리

분명히 코드에는 문제가 없는데 파일 업로드만 실패한다면, 내가 놓치고 있는 **인프라(Nginx, 방화벽 등) 설정**이 있는지 확인해 보는 습관을 들이면 좋다. `413 Request Entity Too Large` 에러를 만난다면 당황하지 말고 Nginx 설정을 가장 먼저 확인해 보자